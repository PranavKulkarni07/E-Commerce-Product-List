{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import*as d3 from\"d3\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PieChartData=_ref=>{let{categoryCounts}=_ref;const chartRef=useRef();useEffect(()=>{if(!categoryCounts||Object.keys(categoryCounts).length===0){return;}const width=400;const height=400;const radius=Math.min(width,height)/2;const color=d3.scaleOrdinal().range([\"#FF6384\",\"#36A2EB\",\"#FFCE56\",\"#33FF99\"]);const data=Object.entries(categoryCounts).map(_ref2=>{let[category,count]=_ref2;return{category,count};});const svg=d3.select(chartRef.current).selectAll(\"svg\").data([null])// Use data([null]) to create only one SVG element\n.join(\"svg\").attr(\"width\",width).attr(\"height\",height).append(\"g\").attr(\"transform\",\"translate(\".concat(width/2,\",\").concat(height/2,\")\"));const arc=d3.arc().outerRadius(radius-10).innerRadius(0);const pie=d3.pie().value(d=>d.count);const arcs=svg.selectAll(\"arc\").data(pie(data)).enter().append(\"g\");arcs.append(\"path\").attr(\"d\",arc).attr(\"fill\",d=>color(d.data.category)).attr(\"stroke\",\"#fff\").style(\"stroke-width\",\"2px\");arcs.append(\"text\").attr(\"transform\",d=>\"translate(\".concat(arc.centroid(d),\")\")).attr(\"dy\",\"0.35em\").style(\"text-anchor\",\"middle\").text(d=>\"\".concat(d.data.category,\" (\").concat(((d.endAngle-d.startAngle)/(2*Math.PI)*100).toFixed(2),\"%)\"));},[categoryCounts]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Categories Pie Chart\"}),/*#__PURE__*/_jsx(\"div\",{ref:chartRef})]});};export default PieChartData;","map":{"version":3,"names":["React","useEffect","useRef","d3","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PieChartData","_ref","categoryCounts","chartRef","Object","keys","length","width","height","radius","Math","min","color","scaleOrdinal","range","data","entries","map","_ref2","category","count","svg","select","current","selectAll","join","attr","append","concat","arc","outerRadius","innerRadius","pie","value","d","arcs","enter","style","centroid","text","endAngle","startAngle","PI","toFixed","children","ref"],"sources":["C:/Users/SHRIKRISHNA/Desktop/Roxiler_Task/Client/products/src/Charts/PieChartData.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst PieChartData = ({ categoryCounts }) => {\r\n  const chartRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!categoryCounts || Object.keys(categoryCounts).length === 0) {\r\n      return;\r\n    }\r\n\r\n    const width = 400;\r\n    const height = 400;\r\n    const radius = Math.min(width, height) / 2;\r\n\r\n    const color = d3\r\n      .scaleOrdinal()\r\n      .range([\"#FF6384\", \"#36A2EB\", \"#FFCE56\", \"#33FF99\"]);\r\n\r\n    const data = Object.entries(categoryCounts).map(([category, count]) => ({\r\n      category,\r\n      count,\r\n    }));\r\n\r\n    const svg = d3\r\n      .select(chartRef.current)\r\n      .selectAll(\"svg\")\r\n      .data([null]) // Use data([null]) to create only one SVG element\r\n      .join(\"svg\")\r\n      .attr(\"width\", width)\r\n      .attr(\"height\", height)\r\n      .append(\"g\")\r\n      .attr(\"transform\", `translate(${width / 2},${height / 2})`);\r\n\r\n    const arc = d3\r\n      .arc()\r\n      .outerRadius(radius - 10)\r\n      .innerRadius(0);\r\n\r\n    const pie = d3.pie().value((d) => d.count);\r\n\r\n    const arcs = svg.selectAll(\"arc\").data(pie(data)).enter().append(\"g\");\r\n\r\n    arcs\r\n      .append(\"path\")\r\n      .attr(\"d\", arc)\r\n      .attr(\"fill\", (d) => color(d.data.category))\r\n      .attr(\"stroke\", \"#fff\")\r\n      .style(\"stroke-width\", \"2px\");\r\n\r\n    arcs\r\n      .append(\"text\")\r\n      .attr(\"transform\", (d) => `translate(${arc.centroid(d)})`)\r\n      .attr(\"dy\", \"0.35em\")\r\n      .style(\"text-anchor\", \"middle\")\r\n      .text(\r\n        (d) =>\r\n          `${d.data.category} (${(\r\n            ((d.endAngle - d.startAngle) / (2 * Math.PI)) *\r\n            100\r\n          ).toFixed(2)}%)`\r\n      );\r\n  }, [categoryCounts]);\r\n\r\n  return (\r\n    <>\r\n      <h3>Categories Pie Chart</h3>\r\n      <div ref={chartRef}></div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PieChartData;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}