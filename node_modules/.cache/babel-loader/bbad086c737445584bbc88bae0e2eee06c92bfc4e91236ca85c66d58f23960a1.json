{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import ProductCard from\"./ProductCard\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProductList=()=>{const[products,setProducts]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[selectedMonth,setSelectedMonth]=useState(\"March\");const[searchValue,setSearchValue]=useState(\"\");const fetchData=useCallback(async()=>{try{const response=await axios.post(\"http://localhost:9000/search/\".concat(selectedMonth),{searchValue:searchValue});setProducts(response.data);}catch(error){console.error(\"Error in Fetching Data: \",error);}},[selectedMonth,searchValue]);useEffect(()=>{fetchData();},[fetchData]);const pageSize=6;const totalCards=products.length;const totalPages=Math.ceil(totalCards/pageSize);// Ensure currentPage is within the valid range\nconst validPage=Math.min(Math.max(1,currentPage),totalPages);const startIndex=(validPage-1)*pageSize;const endIndex=startIndex+pageSize;const currentProducts=products.slice(startIndex,endIndex);const handlePageChange=page=>{setCurrentPage(page);};const handleSearchChange=e=>{setSearchValue(e.target.value);};const handleSearch=()=>{setCurrentPage(1);// Reset to the first page when performing a new search\nfetchData();};const handleClearSearch=()=>{setSearchValue(\"\");setCurrentPage(1);// Reset to the first page when clearing the search\n};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select Month:\"}),/*#__PURE__*/_jsx(\"select\",{onChange:e=>setSelectedMonth(e.target.value),value:selectedMonth,children:Array.from({length:12}).map((_,index)=>/*#__PURE__*/_jsx(\"option\",{value:getMonthName(index),children:getMonthName(index)},index))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchValue,onChange:handleSearchChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"Search\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClearSearch,children:\"Clear Search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:currentProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{title:product.title,price:product.price,imageSrc:product.image},product.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Products: \",totalCards,/*#__PURE__*/_jsx(\"br\",{}),\"Page \",validPage,\" of \",totalPages]}),Array.from({length:totalPages}).map((_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(index+1),className:validPage===index+1?\"active\":\"\",children:index+1},index+1))]})]});};const getMonthName=index=>{const monthNames=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];return monthNames[index];};export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","useCallback","ProductCard","axios","jsx","_jsx","jsxs","_jsxs","ProductList","products","setProducts","currentPage","setCurrentPage","selectedMonth","setSelectedMonth","searchValue","setSearchValue","fetchData","response","post","concat","data","error","console","pageSize","totalCards","length","totalPages","Math","ceil","validPage","min","max","startIndex","endIndex","currentProducts","slice","handlePageChange","page","handleSearchChange","e","target","value","handleSearch","handleClearSearch","children","onChange","Array","from","map","_","index","getMonthName","type","onClick","className","product","title","price","imageSrc","image","id","monthNames"],"sources":["C:/Users/SHRIKRISHNA/Desktop/Roxiler_Task/Client/products/src/components/ProductList.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport ProductCard from \"./ProductCard\";\r\nimport axios from \"axios\";\r\n\r\nconst ProductList = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [selectedMonth, setSelectedMonth] = useState(\"March\");\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n\r\n  const fetchData = useCallback(async () => {\r\n    try {\r\n      const response = await axios.post(\r\n        `http://localhost:9000/search/${selectedMonth}`,\r\n        {\r\n          searchValue: searchValue,\r\n        }\r\n      );\r\n      setProducts(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error in Fetching Data: \", error);\r\n    }\r\n  }, [selectedMonth, searchValue]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  const pageSize = 6;\r\n  const totalCards = products.length;\r\n  const totalPages = Math.ceil(totalCards / pageSize);\r\n\r\n  // Ensure currentPage is within the valid range\r\n  const validPage = Math.min(Math.max(1, currentPage), totalPages);\r\n\r\n  const startIndex = (validPage - 1) * pageSize;\r\n  const endIndex = startIndex + pageSize;\r\n  const currentProducts = products.slice(startIndex, endIndex);\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n  };\r\n\r\n  const handleSearchChange = (e) => {\r\n    setSearchValue(e.target.value);\r\n  };\r\n\r\n  const handleSearch = () => {\r\n    setCurrentPage(1); // Reset to the first page when performing a new search\r\n    fetchData();\r\n  };\r\n\r\n  const handleClearSearch = () => {\r\n    setSearchValue(\"\");\r\n    setCurrentPage(1); // Reset to the first page when clearing the search\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <label>Select Month:</label>\r\n        <select\r\n          onChange={(e) => setSelectedMonth(e.target.value)}\r\n          value={selectedMonth}\r\n        >\r\n          {Array.from({ length: 12 }).map((_, index) => (\r\n            <option key={index} value={getMonthName(index)}>\r\n              {getMonthName(index)}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label>Search:</label>\r\n        <input type=\"text\" value={searchValue} onChange={handleSearchChange} />\r\n        <button onClick={handleSearch}>Search</button>\r\n        <button onClick={handleClearSearch}>Clear Search</button>\r\n      </div>\r\n      <div className=\"card-container\">\r\n        {currentProducts.map((product) => (\r\n          <ProductCard\r\n            key={product.id}\r\n            title={product.title}\r\n            price={product.price}\r\n            imageSrc={product.image}\r\n          />\r\n        ))}\r\n      </div>\r\n      <div className=\"pagination\">\r\n        <p>\r\n          Total Products: {totalCards}\r\n          <br />\r\n          Page {validPage} of {totalPages}\r\n        </p>\r\n        {Array.from({ length: totalPages }).map((_, index) => (\r\n          <button\r\n            key={index + 1}\r\n            onClick={() => handlePageChange(index + 1)}\r\n            className={validPage === index + 1 ? \"active\" : \"\"}\r\n          >\r\n            {index + 1}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst getMonthName = (index) => {\r\n  const monthNames = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ];\r\n  return monthNames[index];\r\n};\r\n\r\nexport default ProductList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}