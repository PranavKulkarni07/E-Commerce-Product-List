{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import*as d3 from\"d3\";import{jsx as _jsx}from\"react/jsx-runtime\";const PriceRangeBarChart=_ref=>{let{priceRanges}=_ref;const chartRef=useRef();const margin={top:20,right:30,bottom:50,left:60};const width=800-margin.left-margin.right;const height=400-margin.top-margin.bottom;let x;// Declare x outside useEffect\nuseEffect(()=>{if(!priceRanges||Object.keys(priceRanges).length===0){return;}const svg=d3.select(chartRef.current);const data=Object.entries(priceRanges).map(_ref2=>{let[range,count]=_ref2;return{range,count};});x=d3.scaleBand().domain(data.map(d=>d.range)).range([0,width]).padding(0.1);const y=d3.scaleLinear().domain([0,d3.max(data,d=>d.count)]).nice().range([height,0]);const color=d3.scaleOrdinal(d3.schemeCategory10);svg.selectAll(\"*\").remove();// Bars\nsvg.append(\"g\").attr(\"transform\",\"translate(\".concat(margin.left,\",\").concat(margin.top,\")\")).selectAll(\"rect\").data(data).enter().append(\"rect\").attr(\"x\",d=>x(d.range)).attr(\"y\",d=>y(d.count)).attr(\"width\",x.bandwidth()).attr(\"height\",d=>height-y(d.count)).attr(\"fill\",d=>color(d.range));// Set color based on range\n// X-axis\nsvg.append(\"g\").attr(\"transform\",\"translate(\".concat(margin.left,\", \").concat(height+margin.top,\")\")).call(d3.axisBottom(x)).selectAll(\"text\").attr(\"transform\",\"rotate(-45)\")// Rotate x-axis labels for better visibility\n.style(\"text-anchor\",\"end\");// Align x-axis labels to the end\n// Y-axis\nsvg.append(\"g\").attr(\"transform\",\"translate(\".concat(margin.left,\", \").concat(margin.top,\")\")).call(d3.axisLeft(y));// X-axis label\nsvg.append(\"text\").attr(\"transform\",\"translate(\".concat(width/2+margin.left,\",\").concat(height+margin.top+40,\")\")).style(\"text-anchor\",\"middle\").text(\"Price Range\");// Y-axis label\nsvg.append(\"text\").attr(\"transform\",\"translate(\".concat(margin.left-40,\",\").concat(height/2+margin.top,\")rotate(-90)\")).style(\"text-anchor\",\"middle\").text(\"Number of items\");},[priceRanges,width,height,margin.left,margin.top]);return/*#__PURE__*/_jsx(\"svg\",{ref:chartRef,viewBox:\"0 0 \".concat(width+margin.left+margin.right,\" \").concat(height+margin.top+margin.bottom),children:/*#__PURE__*/_jsx(\"g\",{className:\"x-axis\",transform:\"translate(\".concat(margin.left,\", \").concat(height+margin.top,\")\")})});};export default PriceRangeBarChart;","map":{"version":3,"names":["React","useEffect","useRef","d3","jsx","_jsx","PriceRangeBarChart","_ref","priceRanges","chartRef","margin","top","right","bottom","left","width","height","x","Object","keys","length","svg","select","current","data","entries","map","_ref2","range","count","scaleBand","domain","d","padding","y","scaleLinear","max","nice","color","scaleOrdinal","schemeCategory10","selectAll","remove","append","attr","concat","enter","bandwidth","call","axisBottom","style","axisLeft","text","ref","viewBox","children","className","transform"],"sources":["C:/Users/SHRIKRISHNA/Desktop/Roxiler_Task/Client/products/src/Charts/PriceRangeBarChart.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst PriceRangeBarChart = ({ priceRanges }) => {\r\n  const chartRef = useRef();\r\n  const margin = { top: 20, right: 30, bottom: 50, left: 60 };\r\n  const width = 800 - margin.left - margin.right;\r\n  const height = 400 - margin.top - margin.bottom;\r\n\r\n  let x; // Declare x outside useEffect\r\n\r\n  useEffect(() => {\r\n    if (!priceRanges || Object.keys(priceRanges).length === 0) {\r\n      return;\r\n    }\r\n\r\n    const svg = d3.select(chartRef.current);\r\n\r\n    const data = Object.entries(priceRanges).map(([range, count]) => ({\r\n      range,\r\n      count,\r\n    }));\r\n\r\n    x = d3\r\n      .scaleBand()\r\n      .domain(data.map((d) => d.range))\r\n      .range([0, width])\r\n      .padding(0.1);\r\n\r\n    const y = d3\r\n      .scaleLinear()\r\n      .domain([0, d3.max(data, (d) => d.count)])\r\n      .nice()\r\n      .range([height, 0]);\r\n\r\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n    svg.selectAll(\"*\").remove();\r\n\r\n    // Bars\r\n    svg\r\n      .append(\"g\")\r\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`)\r\n      .selectAll(\"rect\")\r\n      .data(data)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"x\", (d) => x(d.range))\r\n      .attr(\"y\", (d) => y(d.count))\r\n      .attr(\"width\", x.bandwidth())\r\n      .attr(\"height\", (d) => height - y(d.count))\r\n      .attr(\"fill\", (d) => color(d.range)); // Set color based on range\r\n\r\n    // X-axis\r\n    svg\r\n      .append(\"g\")\r\n      .attr(\"transform\", `translate(${margin.left}, ${height + margin.top})`)\r\n      .call(d3.axisBottom(x))\r\n      .selectAll(\"text\")\r\n      .attr(\"transform\", \"rotate(-45)\") // Rotate x-axis labels for better visibility\r\n      .style(\"text-anchor\", \"end\"); // Align x-axis labels to the end\r\n\r\n    // Y-axis\r\n    svg\r\n      .append(\"g\")\r\n      .attr(\"transform\", `translate(${margin.left}, ${margin.top})`)\r\n      .call(d3.axisLeft(y));\r\n\r\n    // X-axis label\r\n    svg\r\n      .append(\"text\")\r\n      .attr(\r\n        \"transform\",\r\n        `translate(${width / 2 + margin.left},${height + margin.top + 40})`\r\n      )\r\n      .style(\"text-anchor\", \"middle\")\r\n      .text(\"Price Range\");\r\n\r\n    // Y-axis label\r\n    svg\r\n      .append(\"text\")\r\n      .attr(\r\n        \"transform\",\r\n        `translate(${margin.left - 40},${height / 2 + margin.top})rotate(-90)`\r\n      )\r\n      .style(\"text-anchor\", \"middle\")\r\n      .text(\"Number of items\");\r\n  }, [priceRanges, width, height, margin.left, margin.top]);\r\n\r\n  return (\r\n    <svg\r\n      ref={chartRef}\r\n      viewBox={`0 0 ${width + margin.left + margin.right} ${\r\n        height + margin.top + margin.bottom\r\n      }`}\r\n    >\r\n      <g\r\n        className=\"x-axis\"\r\n        transform={`translate(${margin.left}, ${height + margin.top})`}\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default PriceRangeBarChart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}